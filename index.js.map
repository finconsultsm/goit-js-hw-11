{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["const PixabayApiKey = '30127977-afd00810882476e7ef9a8a757';\n\nconst baseUrl = `https://pixabay.com/api/?key=${PixabayApiKey}&image_type=photo&orientation=horizontal&safesearch=true`;\n\nexport const searchImages = (query, perPage) => {\n  const url = `${baseUrl}&q=${query}&per_page=${perPage}`;\n\n  const response = fetch(url)\n    .then(res => res.json())\n    .catch(err => console.log(err));\n\n  return response;\n};\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst galleryContainer = document.querySelector('.gallery');\n\nconst gallery = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport const createGalaryMatkup = images => {\n  const galleryMarkup = images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        views,\n        likes,\n        comments,\n        downloads,\n      }) => {\n        return `\n        <li class=\"gallery-item\">\n          <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img\n              class=\"gallery-image\"\n              src=\"${webformatURL}\"\n              alt=\"${tags}\"\n            />\n            <ul class=\"gallery-info\">\n              <li class=\"gallery-item-info\">\n                <p class=\"info-item-title\">\n                Likes\n                </p>\n                <p class=\"info-item-value\">\n                  ${likes}\n                </p>\n              </li>\n              <li class=\"gallery-item-info\">\n                <p class=\"info-item-title\">\n                  Views\n                </p>\n                <p class=\"info-item-value\">\n                  ${views}\n                </p>\n              </li>\n              <li class=\"gallery-item-info\">\n                <p class=\"info-item-title\">\n                  Comments\n                </p>\n                <p class=\"info-item-value\">\n                  ${comments}\n                </p>\n              </li>\n              <li class=\"gallery-item-info\">\n                <p class=\"info-item-title\">\n                  Downloads\n                </p>\n                <p class=\"info-item-value\">\n                  ${downloads}\n                </p>\n              </li>\n            </ul>\n          </a>\n        </li>\n      `;\n      }\n    )\n    .join('');\n\n  galleryContainer.innerHTML = galleryMarkup;\n  gallery.refresh();\n};\n\n// const gallery = new SimpleLightbox('.gallery a', {\n//   captionsData: 'alt',\n//   captionDelay: 250,\n// });\n","import { searchImages } from './js/pixabay-api';\nimport { createGalaryMatkup } from './js/render-functions';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('.search-form');\nconst loader = document.querySelector('.loader-wrapper');\n\nconst url = new URL(window.location);\nconst searchParams = url.searchParams;\nconst query = searchParams.get('q');\nconst perPage = searchParams.get('per_page') ? searchParams.get('per_page') : 15\n\nif (query) {\n  fetchImage(query)\n}\n\n\n\nform.addEventListener('submit', (evt => {\n  evt.preventDefault();\n\n  const formData = new FormData(form);\n  const query = formData.get('query').trim();\n\n  if(query.length < 1) {\n    iziToast.error({\n      title: 'Error',\n      position: 'topRight',\n      message: 'Query field cannot be empty!',\n    });\n    return;\n  }\n\n  url.searchParams.set('q', query);\n  url.searchParams.set('per_page', perPage)\n  window.history.pushState({}, '', url);\n  \n  fetchImage(query, perPage);\n\n}));\n\nfunction fetchImage (query, perPage) {\n  \n\n  loader.classList.add('show');\n\n  const response = searchImages(query, perPage)\n    .then(data => {\n      loader.classList.remove('show');\n\n      if (data.hits.length < 1) {\n        iziToast.error({\n          title: 'Error',\n          position: 'topRight',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n        });\n      }\n      createGalaryMatkup(data.hits);\n    })\n    .catch(err => {\n      loader.classList.remove('show');\n      iziToast.error({\n        title: 'Error',\n        position: 'topRight',\n        message: 'Failed to load images. Please try again!',\n      });\n    });\n}"],"names":["PixabayApiKey","baseUrl","searchImages","query","perPage","url","res","err","galleryContainer","gallery","SimpleLightbox","createGalaryMatkup","images","galleryMarkup","webformatURL","largeImageURL","tags","views","likes","comments","downloads","form","loader","searchParams","fetchImage","evt","iziToast","data"],"mappings":"6vBAAA,MAAMA,EAAgB,qCAEhBC,EAAU,gCAAgCD,CAAa,2DAEhDE,EAAe,CAACC,EAAOC,IAAY,CAC9C,MAAMC,EAAM,GAAGJ,CAAO,MAAME,CAAK,aAAaC,CAAO,GAMrD,OAJiB,MAAMC,CAAG,EACvB,KAAKC,GAAOA,EAAI,MAAM,EACtB,MAAMC,GAAO,QAAQ,IAAIA,CAAG,CAAC,CAGlC,ECTMC,EAAmB,SAAS,cAAc,UAAU,EAEpDC,EAAU,IAAIC,EAAe,aAAc,CAC/C,aAAc,MACd,aAAc,GAChB,CAAC,EAEYC,EAAqBC,GAAU,CAC1C,MAAMC,EAAgBD,EACnB,IACC,CAAC,CACC,aAAAE,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IACe;AAAA;AAAA,0CAE2BL,CAAa;AAAA;AAAA;AAAA,qBAGlCD,CAAY;AAAA,qBACZE,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAQLE,CAAK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAQLD,CAAK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAQLE,CAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAQRC,CAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAQxB,EACA,KAAK,EAAE,EAEVZ,EAAiB,UAAYK,EAC7BJ,EAAQ,QAAO,CACjB,ECpEMY,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAS,SAAS,cAAc,iBAAiB,EAEjDjB,EAAM,IAAI,IAAI,OAAO,QAAQ,EAC7BkB,EAAelB,EAAI,aACnBF,EAAQoB,EAAa,IAAI,GAAG,EAC5BnB,EAAUmB,EAAa,IAAI,UAAU,EAAIA,EAAa,IAAI,UAAU,EAAI,GAE1EpB,GACFqB,EAAWrB,CAAK,EAKlBkB,EAAK,iBAAiB,SAAWI,GAAO,CACtCA,EAAI,eAAc,EAGlB,MAAMtB,EADW,IAAI,SAASkB,CAAI,EACX,IAAI,OAAO,EAAE,KAAI,EAExC,GAAGlB,EAAM,OAAS,EAAG,CACnBuB,EAAS,MAAM,CACb,MAAO,QACP,SAAU,WACV,QAAS,8BACf,CAAK,EACD,MACD,CAEDrB,EAAI,aAAa,IAAI,IAAKF,CAAK,EAC/BE,EAAI,aAAa,IAAI,WAAYD,CAAO,EACxC,OAAO,QAAQ,UAAU,CAAE,EAAE,GAAIC,CAAG,EAEpCmB,EAAWrB,EAAOC,CAAO,CAE3B,GAEA,SAASoB,EAAYrB,EAAOC,EAAS,CAGnCkB,EAAO,UAAU,IAAI,MAAM,EAEVpB,EAAaC,EAAOC,CAAO,EACzC,KAAKuB,GAAQ,CACZL,EAAO,UAAU,OAAO,MAAM,EAE1BK,EAAK,KAAK,OAAS,GACrBD,EAAS,MAAM,CACb,MAAO,QACP,SAAU,WACV,QACE,0EACZ,CAAS,EAEHf,EAAmBgB,EAAK,IAAI,CAClC,CAAK,EACA,MAAMpB,GAAO,CACZe,EAAO,UAAU,OAAO,MAAM,EAC9BI,EAAS,MAAM,CACb,MAAO,QACP,SAAU,WACV,QAAS,0CACjB,CAAO,CACP,CAAK,CACL"}